{% put scripts %}
    <script>
        $(function () {
            $('body').on('change', '.js-mall-property-selector', function () {
                var values = $('.js-mall-property-selector').map(function () {
                    return this.value;
                }).toArray();

                $.request('onChangeProperty', {
                    data: {values: values},
                    update: {'{{ __SELF__ }}::addtocart': '.mall-add-to-cart'}
                })
            })

            $('.js-mall-property-selector').trigger('change')
        })
    </script>
{% endput %}